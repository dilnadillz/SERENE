<%- include('../adminlayouts/header.ejs') %>






<div class="main-panel">
    <div class="content-wrapper">
        <div class="page-header">
            <h3 class="page-title">Order Details</h3>
            <nav aria-label="breadcrumb"></nav>
        </div>
        <div class="card">
            <div class="card-body">
                <!-- <h4 class="card-title">Order List</h4> -->
                <div class="table-responsive">
                    <table class="table table-borderless table-spaced">
                        <thead>
                            <tr>
                                <th>Customer Info</th>
                                <th>Order Info</th>
                               
                            </tr>
                        </thead>
                        <tbody>
                            
                            <tr>
                                <td><%= order.userz.name%><br><%= order.userz.email%><br><%= order.userz.mobile%></td>
                                <td><%= order.payment%></td>
                                <td></td>
                            </tr>
                          
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
  </div>


  <div class="main-panel">
    <div class="content-wrapper">
        <div class="page-header">
            <h3 class="page-title">Product Details</h3>
            <nav aria-label="breadcrumb"></nav>
        </div>
        <div class="card">
            <div class="card-body">
                <!-- <h4 class="card-title">Order List</h4> -->
                <div class="table-responsive">
                    <table class="table table-borderless table-spaced">
                        <thead>
                            <tr>
                                <th>Product Name</th>
                                <th>Price</th>
                                <th>Quantity </th>
                                <th>Status </th>
                                <th>Action </th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <tr>
                                <td><%= order.productDetls.productName%></td>
                                <td><%= order. total_amount%></td></td>
                                <td><%= order.details.quantity%></td>
                                <td><%= order.details.status%></td>
                                
                                <td>
                                    <div class="custom-select">
                                    <form action="" id="updateStatusForm">
                                        <select name="orderStatus" id="">
                                            <option value="Pending" <%= order.details.status === 'Pending' ? 'selected' : '' %>>Pending</option>
                                            <option value="Shipped" <%= order.details.status === 'Shipped' ? 'selected' : '' %>>Shipped</option>
                                            <option value="Delivered" <%= order.details.status === 'Delivered' ? 'selected' : '' %>>Delivered</option>
                                            <option value="Cancelled" <%= order.details.status === 'Cancelled' ? 'selected' : '' %>>Cancelled</option>
                                        </select>
                                        <button type="button" onclick="updateOrderStatus('<%= order._id %>','<%= order.details.productId %>')">Update</button>
                                    </form>
                                </div>
                                </td>
                            </tr>
                          
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
  </div>
  

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <script>
    function updateOrderStatus(orderId, productId) {
      const orderStatus = document.querySelector('select[name="orderStatus"]').value;
      axios.post(`/admin/orders/update-status`, {orderId,productId,orderStatus})
        .then(response => {
            console.log(
                'fxffghg',response
            );
          console.log(response.data);
          window.location.reload()
         
        })
        .catch(error => {
          console.error(error);
    
        });
    }
  </script>



  
<style>
 .order-details, .product-details {
    margin-bottom: 20px; /* Add space between the sections */
}

.order-details {
    background-color: #f8f9fa; /* Light background for order details */
}

.product-details {
    background-color: #e9ecef; /* Slightly darker background for product details */
}

.content-wrapper {
    padding: 20px; /* Add padding inside the content wrapper */
}

.page-header {
    margin-bottom: 20px; /* Add space below the header */
}

.card {
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.card-body {
    padding: 20px;
}

.table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 10px; /* Adjust spacing between table rows */
}

.table th,
.table td {
    padding: 8px;
}

.table th {
    background-color: #f8f9fa;
}


</style>

               
      
   
      <!-- partial -->
    </div>
    <!-- main-panel ends -->
  </div>
  <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <!-- plugins:js -->
  <script src="/assetsadmin/vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page -->
  <script src="/assetsadmin/vendors/chart.js/Chart.min.js"></script>
  <script src="/assetsadmin/js/jquery.cookie.js" type="text/javascript"></script>
  <!-- End plugin js for this page -->
  <!-- inject:js -->
  <script src="/assetsadmin/js/off-canvas.js"></script>
  <script src="/assetsadmin/js/hoverable-collapse.js"></script>
  <script src="/assetsadmin/js/misc.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page -->
  <script src="/assetsadmin/js/dashboard.js"></script>
  <script src="/assetsadmin/js/todolist.js"></script>
  <!-- End custom js for this page -->
</body>

<!-- Mirrored from demo.bootstrapdash.com/purple-admin-free/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 28 Dec 2023 06:57:42 GMT -->

</html>


<%- include('../adminlayouts/footer.ejs') %>